<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Test Social Bar Adsterra</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    background: #f0f0f0;
  }

  #toggleBtn {
    padding: 15px 25px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    border-radius: 10px;
    background: #0066ff;
    color: white;
    z-index: 2000;
    position: relative;
  }

  #toggleBtn:hover {
    transform: scale(1.1);
    background: #004bb5;
  }
</style>

<!-- Script officiel Adsterra Social Bar -->
<script src="https://pl28510815.effectivegatecpm.com/c4/09/ce/c409ceaaf60b0e749f2ccaa50ac6e77c.js"></script>
</head>
<body>

<button id="toggleBtn">Désactiver la barre</button>

<script>
const btn = document.getElementById("toggleBtn");
let isActive = true;
let bar = null;

// Fonction pour détecter la barre Adsterra
function detectBar() {
  // Souvent la barre a un style fixed en bas ou un iframe
  bar = document.querySelector("div[style*='position:fixed'][style*='bottom']") ||
        document.querySelector("iframe[src*='effectivegatecpm.com']");

  if(bar){
    console.log("Social bar détectée !");
    clearInterval(detectInterval); // stop l'intervalle une fois détectée
  }
}

// On répète toutes les 500ms jusqu'à trouver la barre
const detectInterval = setInterval(detectBar, 500);

// Bouton toggle
btn.addEventListener("click", () => {
  if(!bar){
    console.log("Barre pas encore chargée...");
    return;
  }

  if(isActive){
    bar.style.display = "none";
    btn.textContent = "Activer la barre";
  } else {
    bar.style.display = "block";
    btn.textContent = "Désactiver la barre";
  }
  isActive = !isActive;
});
</script>

</body>
</html>
