<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion Glass</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif;}
body,html{height:100%;display:flex;justify-content:center;align-items:center;background:#0b0c10;}
.container{background:rgba(255,255,255,0.05);backdrop-filter:blur(20px);border-radius:25px;padding:40px 35px;width:100%;max-width:420px;box-shadow:0 15px 40px rgba(0,0,0,0.6);text-align:center;transition:transform 0.3s ease;}
.container:hover{transform:translateY(-5px);}
.logo{font-size:55px;margin-bottom:25px;color:#00bfff;transition:0.3s;}
.logo:hover{color:#1de9b6;}
h1{color:#fff;font-size:26px;margin-bottom:12px;}
p.subtitle{color:#aaa;margin-bottom:30px;font-size:14px;}
.field{display:flex;align-items:center;margin-bottom:18px;background:rgba(255,255,255,0.08);backdrop-filter:blur(15px);border-radius:15px;padding:14px 12px;transition:all 0.3s ease;box-shadow:0 0 10px rgba(0,0,0,0.3);}
.field:hover{background:rgba(255,255,255,0.12);box-shadow:0 0 15px rgba(0,191,255,0.2);}
.field i{margin-right:12px;color:#888;font-size:18px;}
.field input{background:transparent;border:none;outline:none;color:#fff;flex:1;font-size:15px;padding:10px;border-radius:12px;transition:all 0.3s ease;}
.field input:focus{background:rgba(255,255,255,0.15);box-shadow:0 0 10px #00bfff88;backdrop-filter:blur(20px);}
.toggle-password{cursor:pointer;margin-left:8px;font-size:18px;color:#888;transition:0.3s;}
.toggle-password:hover{color:#00bfff;}
.btn{width:100%;padding:14px;border:none;border-radius:18px;font-size:16px;font-weight:bold;cursor:pointer;margin-bottom:15px;transition:all 0.3s ease;backdrop-filter:blur(10px);}
.btn-login{background:rgba(0,191,255,0.8);color:#fff;box-shadow:0 5px 20px rgba(0,191,255,0.4);}
.btn-login:hover{background:rgba(0,191,255,1);box-shadow:0 0 25px #00bfff88;transform:translateY(-2px);}
.switch-mode{background:transparent;border:2px solid #444;color:#00bfff;border-radius:18px;padding:14px;cursor:pointer;width:100%;font-weight:bold;font-size:14px;transition:all 0.3s;}
.switch-mode:hover{background:rgba(0,191,255,0.1);box-shadow:0 0 15px #00bfff66;}
.separator{display:flex;align-items:center;text-align:center;margin:15px 0;}
.separator::before,.separator::after{content:"";flex:1;height:1px;background:#333;}
.separator::before{margin-right:10px;}
.separator::after{margin-left:10px;}
.separator span{color:#666;font-size:12px;}
#statusLabel{min-height:20px;margin-bottom:10px;font-size:14px;font-weight:bold;color:#ff5555;}
.loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:9999;flex-direction:column;color:#fff;font-size:16px;padding:20px;text-align:center;}
.spinner{width:50px;height:50px;border:5px solid #2d2d40;border-top:5px solid #00bfff;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:15px;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
</style>
</head>
<body>

<div class="loading-overlay" id="loadingScreen" style="display:none;">
    <div class="spinner"></div>
    <div>Connexion au serveur...</div>
</div>

<div class="container" id="authContainer">
    <div class="logo">üéÆ</div>
    <h1 id="title">Se connecter</h1>
    <p class="subtitle" id="subtitle">Acc√©dez √† votre espace de jeu</p>

    <div class="field">
        <i>üë§</i>
        <input type="text" id="username" placeholder="Nom d'utilisateur">
    </div>
    <div class="field">
        <i>üîí</i>
        <input type="password" id="password" placeholder="Mot de passe">
        <span class="toggle-password" id="togglePassword">üëÅ</span>
    </div>

    <button class="btn btn-login" id="submitBtn">Se connecter</button>
    <div id="statusLabel"></div>
    <div class="separator"><span>ou</span></div>
    <button class="switch-mode" id="switchBtn">Cr√©er un compte</button>
</div>

<script>
const switchBtn=document.getElementById('switchBtn');
const title=document.getElementById('title');
const subtitle=document.getElementById('subtitle');
const submitBtn=document.getElementById('submitBtn');
const passwordInput=document.getElementById('password');
const togglePassword=document.getElementById('togglePassword');
let isLoginMode=true;

switchBtn.addEventListener('click',()=>{
    isLoginMode=!isLoginMode;
    if(isLoginMode){title.textContent="Se connecter";subtitle.textContent="Acc√©dez √† votre espace de jeu";submitBtn.textContent="Se connecter";switchBtn.textContent="Cr√©er un compte";}
    else{title.textContent="Cr√©er un compte";subtitle.textContent="Inscrivez-vous pour commencer √† jouer";submitBtn.textContent="S'inscrire";switchBtn.textContent="Se connecter";}
});

togglePassword.addEventListener('click',()=>{
    const type=passwordInput.getAttribute('type')==='password'?'text':'password';
    passwordInput.setAttribute('type',type);
    togglePassword.textContent=type==='text'?'üôà':'üëÅ';
});

submitBtn.addEventListener('click',async()=>{
    const username=document.getElementById('username').value.trim();
    const password=document.getElementById('password').value.trim();
    if(!username||!password){alert("Veuillez remplir tous les champs !");return;}
    const data={id:username,password};
    const url=isLoginMode?"https://project-3-api-2bgb.onrender.com/login":"https://project-3-api-2bgb.onrender.com/signup";
    try{
        document.getElementById('loadingScreen').style.display='flex';
        const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
        const result=await response.json();
        document.getElementById('loadingScreen').style.display='none';
        if(result.status==="success"){localStorage.setItem("username",username);alert(isLoginMode?"Connexion r√©ussie !":"Compte cr√©√© avec succ√®s !");window.location.href="menu.html";}
        else{alert(result.message||(isLoginMode?"ID ou mot de passe incorrect":"Impossible de cr√©er le compte"));}
    }catch(err){document.getElementById('loadingScreen').style.display='none';alert("Erreur r√©seau : "+err);}
});
</script>

</body>
</html>
