<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion</title>
<style>
/* --- Ton CSS existant --- */
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
body, html { height: 100%; background: #13131b; display: flex; justify-content: center; align-items: center; padding: 10px; }
.container { background: #13131b; border-radius: 20px; padding: 30px 20px; width: 100%; max-width: 400px; box-shadow: 0 0 20px rgba(0,0,0,0.5); text-align: center; transition: all 0.3s ease; }
.logo { font-size: 50px; margin-bottom: 10px; cursor: grab; }
h1 { color: #fff; font-size: 24px; margin-bottom: 8px; word-break: break-word; }
p.subtitle { color: #888899; margin-bottom: 20px; font-size: 14px; }
.field { display: flex; align-items: center; margin-bottom: 12px; background: #1e1e2e; border: 2px solid #2d2d45; border-radius: 10px; padding: 5px 10px; transition: all 0.2s ease; }
.field i { margin-right: 10px; color: #888899; font-size: 18px; }
.field input { background: transparent; border: none; outline: none; color: #fff; flex: 1; font-size: 14px; padding: 10px; }
.toggle-password { cursor: pointer; margin-left: 5px; font-size: 18px; color: #888899; }
.btn { width: 100%; padding: 14px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; margin-bottom: 12px; transition: all 0.2s ease; }
.btn-login { background: #4a9eff; color: #fff; }
.btn-login:hover { background: #3d85e6; }
.switch-mode { background: transparent; border: 2px solid #2d2d45; color: #4a9eff; border-radius: 12px; padding: 12px; cursor: pointer; width: 100%; font-weight: bold; font-size: 14px; transition: all 0.2s ease; }
.switch-mode:hover { background: #1e1e2e; }
.separator { display: flex; align-items: center; text-align: center; margin: 10px 0 15px 0; }
.separator::before, .separator::after { content: ""; flex: 1; height: 1px; background: #2d2d45; }
.separator::before { margin-right: 10px; }
.separator::after { margin-left: 10px; }
.separator span { color: #666677; font-size: 12px; }
#statusLabel { min-height: 20px; margin-bottom: 10px; font-size: 14px; font-weight: bold; transition: all 0.2s ease; }
.loading-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index: 9999; flex-direction: column; color: #fff; font-size: 16px; padding: 20px; text-align: center; }
.spinner { width: 60px; height: 60px; border: 6px solid #2d2d40; border-top: 6px solid #4a9eff; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
</head>
<body>

<div class="loading-overlay" id="loadingScreen" style="display:none;">
Â  Â  <div class="spinner"></div>
Â  Â  <div>Connexion au serveur...</div>
</div>

<div class="container" id="authContainer">
Â  Â  <div class="logo">ğŸ®</div>

Â  Â  <h1 id="title">Se connecter</h1>
Â  Â  <p class="subtitle" id="subtitle">AccÃ©dez Ã  votre espace de jeu</p>

Â  Â  <div class="field">
Â  Â  Â  Â  <i>ğŸ‘¤</i>
Â  Â  Â  Â  <input type="text" id="username" placeholder="Nom d'utilisateur">
Â  Â  </div>

Â  Â  <div class="field">
Â  Â  Â  Â  <i>ğŸ”’</i>
Â  Â  Â  Â  <input type="password" id="password" placeholder="Mot de passe">
Â  Â  Â  Â  <span class="toggle-password" id="togglePassword">ğŸ‘</span>
Â  Â  </div>

Â  Â  <button class="btn btn-login" id="submitBtn">Se connecter</button>

Â  Â  Â  Â  <div id="statusLabel"></div>

Â  Â  <div class="separator"><span>ou</span></div>

Â  Â  <button class="switch-mode" id="switchBtn">CrÃ©er un compte</button>
</div>

<script>
const switchBtn = document.getElementById('switchBtn');
const title = document.getElementById('title');
const subtitle = document.getElementById('subtitle');
const submitBtn = document.getElementById('submitBtn');
const passwordInput = document.getElementById('password'); // Nouveau
const togglePassword = document.getElementById('togglePassword'); // Nouveau

let isLoginMode = true;

// ğŸ”¹ Toggle entre login et signup
switchBtn.addEventListener('click', () => {
Â  Â  isLoginMode = !isLoginMode;
Â  Â  if (isLoginMode) {
Â  Â  Â  Â  title.textContent = "Se connecter";
Â  Â  Â  Â  subtitle.textContent = "AccÃ©dez Ã  votre espace de jeu";
Â  Â  Â  Â  submitBtn.textContent = "Se connecter";
Â  Â  Â  Â  switchBtn.textContent = "CrÃ©er un compte";
Â  Â  } else {
Â  Â  Â  Â  title.textContent = "CrÃ©er un compte";
Â  Â  Â  Â  subtitle.textContent = "Inscrivez-vous pour commencer Ã  jouer";
Â  Â  Â  Â  submitBtn.textContent = "S'inscrire";
Â  Â  Â  Â  switchBtn.textContent = "Se connecter";
Â  Â  }
});

// ğŸ”¹ Toggle Afficher/Masquer le Mot de Passe (NOUVEAU CODE)
togglePassword.addEventListener('click', () => {
    // 1. DÃ©termine le nouveau type (text si c'est password, et vice-versa)
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    
    // 2. Applique le nouveau type Ã  l'input
    passwordInput.setAttribute('type', type);
    
    // 3. Change l'icÃ´ne de l'Å“il
    togglePassword.textContent = type === 'text' ? 'ğŸ™ˆ' : 'ğŸ‘'; 
});


// ğŸ”¹ Fonction login/signup
submitBtn.addEventListener('click', async () => {
Â  Â  const username = document.getElementById('username').value.trim();
Â  Â  const password = document.getElementById('password').value.trim();

Â  Â  if (!username || !password) {
Â  Â  Â  Â  alert("Veuillez remplir tous les champs !");
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  const data = { id: username, password };
Â  Â  const url = isLoginMode 
Â  Â  Â  Â  ? "https://project-3-api-2bgb.onrender.com/login" 
Â  Â  Â  Â  : "https://project-3-api-2bgb.onrender.com/signup"; 

Â  Â  try {
Â  Â  Â  Â  document.getElementById('loadingScreen').style.display = 'flex';
Â  Â  Â  Â  const response = await fetch(url, {
Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  body: JSON.stringify(data)
Â  Â  Â  Â  });
Â  Â  Â  Â  const result = await response.json();
Â  Â  Â  Â  document.getElementById('loadingScreen').style.display = 'none';

Â  Â  Â  Â  if (result.status === "success") {
Â  Â  Â  Â  Â  Â  // Stockage du username dans localStorage
Â  Â  Â  Â  Â  Â  localStorage.setItem("username", username);
Â  Â  Â  Â  Â  Â  alert(isLoginMode ? "Connexion rÃ©ussie !" : "Compte crÃ©Ã© avec succÃ¨s !");

Â  Â  Â  Â  Â  Â  // Redirection vers menu.html
Â  Â  Â  Â  Â  Â  window.location.href = "menu.html";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  alert(result.message || (isLoginMode ? "ID ou mot de passe incorrect" : "Impossible de crÃ©er le compte"));
Â  Â  Â  Â  }
Â  Â  } catch(err) {
Â  Â  Â  Â  document.getElementById('loadingScreen').style.display = 'none';
Â  Â  Â  Â  alert("Erreur rÃ©seau : " + err);
Â  Â  }
});
</script>

</body>
</html>