<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Launcher</title>
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
Â  Â  <style>
Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  /* CSS GÃ‰NÃ‰RAL & MISE EN PAGE */
Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  *{box-sizing:border-box;margin:0;padding:0}
Â  Â  Â  Â  body{font-family:'Segoe UI',Arial,sans-serif;background:#0f1419;color:#eee;scroll-behavior:smooth;overflow-x:hidden;}
Â  Â  Â  Â  
Â  Â  Â  Â  /* Ajustements pour la barre qui monte/descend */
Â  Â  Â  Â  header{
Â  Â  Â  Â  Â  Â  position:fixed; 
Â  Â  Â  Â  Â  Â  top:0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%; 
Â  Â  Â  Â  Â  Â  background:rgba(15,20,25,0.6);
Â  Â  Â  Â  Â  Â  backdrop-filter:blur(20px);
Â  Â  Â  Â  Â  Â  display:flex;
Â  Â  Â  Â  Â  Â  align-items:center;
Â  Â  Â  Â  Â  Â  justify-content:space-between;
Â  Â  Â  Â  Â  Â  padding:15px 30px;
Â  Â  Â  Â  Â  Â  box-shadow:0 4px 20px rgba(0,0,0,0.6);
Â  Â  Â  Â  Â  Â  border-radius:0 0 20px 20px;
Â  Â  Â  Â  Â  Â  z-index:10;
Â  Â  Â  Â  Â  Â  /* Position initiale hors Ã©cran, ne laissant qu'une fine bordure visible */
Â  Â  Â  Â  Â  Â  transform: translateY(calc(-100% + 10px)); 
Â  Â  Â  Â  Â  Â  transition: transform 0.4s ease-out; 
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Classe pour afficher la barre quand elle est survolÃ©e */
Â  Â  Â  Â  header.show {
Â  Â  Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  Â  }

Â  Â  Â  Â  header h1{font-size:28px;color:#fff;font-weight:700;letter-spacing:1px;transition:0.3s;}
Â  Â  Â  Â  header h1:hover{color:#00bfff;}
Â  Â  Â  Â  
Â  Â  Â  Â  #main-nav{display:flex;align-items:center;gap:15px;background:rgba(255,255,255,0.05);backdrop-filter:blur(15px);padding:10px 20px;border-radius:20px;}
Â  Â  Â  Â  #main-nav button{background:transparent;color:#fff;border:none;padding:10px 18px;border-radius:15px;font-weight:600;cursor:pointer;transition:0.3s;font-size:16px;position:relative;overflow:hidden;}
Â  Â  Â  Â  #main-nav button::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,191,255,0.2);opacity:0;transition:0.3s;border-radius:15px;}
Â  Â  Â  Â  #main-nav button:hover::after{opacity:1;}
Â  Â  Â  Â  #main-nav button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,191,255,0.3);}
Â  Â  Â  Â  #search_bar{padding:10px 18px;border-radius:15px;border:none;background:rgba(255,255,255,0.05);backdrop-filter:blur(15px);outline:none;color:#eee;transition:0.3s;min-width:180px;}
Â  Â  Â  Â  #search_bar:focus{background:rgba(0,191,255,0.1);box-shadow:0 0 10px #00bfff66;}
Â  Â  Â  Â  #logout-button{background:rgba(255,255,255,0.05);backdrop-filter:blur(15px);color:#ff4d6d;border:2px solid #ff4d6d;padding:10px 18px;border-radius:15px;font-weight:bold;cursor:pointer;transition:0.3s;}
Â  Â  Â  Â  #logout-button:hover{background:#ff4d6d;color:#fff;box-shadow:0 0 18px #ff4d6d88;transform:translateY(-2px);}
Â  Â  Â  Â  .section-title{font-size:28px;margin:30px 25px 15px 25px;color:#fff;font-weight:700;}
Â  Â  Â  Â  .game-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:0 30px 50px 30px;}

Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  /* CARTE DE JEU (CARD) */
Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  .card{
Â  Â  Â  Â  Â  Â  position:relative;
Â  Â  Â  Â  Â  Â  background:rgba(255,255,255,0.05);
Â  Â  Â  Â  Â  Â  backdrop-filter:blur(15px);
Â  Â  Â  Â  Â  Â  border-radius:20px;
Â  Â  Â  Â  Â  Â  overflow:hidden;
Â  Â  Â  Â  Â  Â  cursor:pointer; 
Â  Â  Â  Â  Â  Â  transition:transform 0.3s,box-shadow 0.3s;
Â  Â  Â  Â  Â  Â  box-shadow:0 5px 20px rgba(0,0,0,0.4);
Â  Â  Â  Â  }
Â  Â  Â  Â  .card.disabled {
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  opacity: 0.7;
Â  Â  Â  Â  }
Â  Â  Â  Â  .card.disabled:hover {
Â  Â  Â  Â  Â  Â  transform: none;
Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 20px rgba(0,0,0,0.4);
Â  Â  Â  Â  Â  Â  animation: none; 
Â  Â  Â  Â  }

Â  Â  Â  Â  .card::before{content:"";position:absolute;top:0;left:-100%;width:50%;height:100%;background:linear-gradient(120deg,rgba(255,255,255,0.1),rgba(255,255,255,0.3),rgba(255,255,255,0.1));transform:skewX(-20deg);transition:0.5s;}
Â  Â  Â  Â  .card:hover::before{animation:shimmer 1s forwards;}
Â  Â  Â  Â  @keyframes shimmer{0%{left:-100%;}100%{left:200%;}}
Â  Â  Â  Â  .card:hover{transform:translateY(-8px);box-shadow:0 15px 30px rgba(0,191,255,0.3);}

Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  /* IMAGE DE CARTE */
Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  .card-image{
Â  Â  Â  Â  Â  Â  height:180px;
Â  Â  Â  Â  Â  Â  display:flex;
Â  Â  Â  Â  Â  Â  align-items:center;
Â  Â  Â  Â  Â  Â  justify-content:center;
Â  Â  Â  Â  Â  Â  font-size:50px;
Â  Â  Â  Â  Â  Â  color:#fff;
Â  Â  Â  Â  Â  Â  transition:all 0.3s;
Â  Â  Â  Â  Â  Â  position: relative; 
Â  Â  Â  Â  Â  Â  background-size: cover !important;
Â  Â  Â  Â  Â  Â  background-position: center !important;
Â  Â  Â  Â  Â  Â  background-repeat: no-repeat !important;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-image::after {
Â  Â  Â  Â  Â  Â  content: "";
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.0); 
Â  Â  Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-image .game-icon {z-index: 2;}
Â  Â  Â  Â  .card-info{padding:15px;}
Â  Â  Â  Â  .card-title{font-size:18px;font-weight:600;margin:0;color:#fff;}
Â  Â  Â  Â  .card-genre{font-size:14px;opacity:0.6;margin-top:6px;margin-bottom:12px;}
Â  Â  Â  Â  .card-button{ 
Â  Â  Â  Â  Â  Â  width:100%;background:#00bfff;border:none;padding:12px;color:#fff;font-size:15px;border-radius:12px;cursor:pointer;transition:0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .card-button:hover{background:#009acd;}
Â  Â  Â  Â  .card-button:disabled{background:#555;cursor:not-allowed;}

Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  /* SIDEBAR */
Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  #sidebar{position:fixed;top:0;right:-320px;width:320px;height:100%;background:rgba(20,20,30,0.9);backdrop-filter:blur(20px);box-shadow:-5px 0 30px rgba(0,0,0,0.7);transition:right 0.4s ease;z-index:50;padding:20px;display:flex;flex-direction:column;}
Â  Â  Â  Â  #sidebar h2{color:#00bfff;margin-bottom:20px;}
Â  Â  Â  Â  #sidebar button.close-sidebar{background:#ff4d6d;color:#fff;border:none;padding:10px 18px;border-radius:12px;cursor:pointer;align-self:flex-end;transition:0.3s;}
Â  Â  Â  Â  #sidebar button.close-sidebar:hover{background:#ff1a3c;box-shadow:0 0 15px #ff4d6d88;}
Â  Â  Â  Â  .sidebar-open{right:0 !important;}

Â  Â  Â  Â  /* ----------------------------------- */
Â  Â  Â  Â  /* POPUP COOKIES (AJOUTÃ‰) */
Â  Â  Â  Â  /* ----------------------------------- */

Â  Â  Â  Â  #cookie-modal-overlay {
            /* IMPORTANT : display: none; par dÃ©faut. Le JS va le surcharger si besoin. */
            display: none; 
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.75);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(5px);
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  }

Â  Â  Â  Â  #cookie-modal {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  background: rgba(15, 20, 25, 0.95);
Â  Â  Â  Â  Â  Â  border: 2px solid #00bfff;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-width: 400px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 40px rgba(0, 191, 255, 0.4);
Â  Â  Â  Â  }
Â  Â  Â  Â  #cookie-modal h3 {color: #fff;font-size: 20px;margin-bottom: 15px;}
Â  Â  Â  Â  #cookie-modal p {color: #ccc;font-size: 14px;margin-bottom: 25px;}
Â  Â  Â  Â  
Â  Â  Â  Â  #button-group {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  #refuse-cookies-button, 
Â  Â  Â  Â  #accept-cookies-button {
Â  Â  Â  Â  Â  Â  width: 165px; 
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  transition: opacity 0.3s;
Â  Â  Â  Â  Â  Â  position: static; 
Â  Â  Â  Â  Â  Â  transform: none; 
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #refuse-cookies-button {
Â  Â  Â  Â  Â  Â  background: #ff4d6d;
Â  Â  Â  Â  Â  Â  cursor: not-allowed; 
Â  Â  Â  Â  Â  Â  opacity: 0.6; 
Â  Â  Â  Â  Â  Â  pointer-events: none; 
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #accept-cookies-button {
Â  Â  Â  Â  Â  Â  background: #00bfff;
Â  Â  Â  Â  Â  Â  cursor: pointer; 
Â  Â  Â  Â  Â  Â  pointer-events: all !important; 
Â  Â  Â  Â  }

Â  Â  Â  Â  #accept-cookies-button.teleporting {
Â  Â  Â  Â  Â  Â  position: fixed; 
Â  Â  Â  Â  Â  Â  z-index: 1002; 
Â  Â  Â  Â  Â  Â  cursor: default; 
Â  Â  Â  Â  Â  Â  pointer-events: none !important; 
Â  Â  Â  Â  Â  Â  transition: none; 
Â  Â  Â  Â  Â  Â  width: 165px; 
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #accept-cookies-button.stopped {
Â  Â  Â  Â  Â  Â  position: fixed; 
Â  Â  Â  Â  Â  Â  pointer-events: all !important; 
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  width: 165px; 
Â  Â  Â  Â  }

Â  Â  Â  Â  #close-cookie-modal {
Â  Â  Â  Â  Â  Â  position: absolute; 
Â  Â  Â  Â  Â  Â  top: 5px; 
Â  Â  Â  Â  Â  Â  right: 10px;
Â  Â  Â  Â  Â  Â  background: transparent;
Â  Â  Â  Â  Â  Â  color: #eee;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  font-size: 20px; 
Â  Â  Â  Â  Â  Â  opacity: 0.05; 
Â  Â  Â  Â  Â  Â  cursor: pointer; 
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  }
Â  Â  Â  Â  #close-cookie-modal:hover {
Â  Â  Â  Â  Â  Â  opacity: 0.15; 
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<header id="main-header">
Â  Â  <h1 id="welcomeTitle">ğŸ® Accueil</h1>
Â  Â  <nav id="main-nav">
Â  Â  Â  Â  <button>ğŸ“š BibliothÃ¨que</button>
Â  Â  Â  Â  <input id="search_bar" placeholder="ğŸ” Rechercher un jeu...">
Â  Â  Â  Â  <button id="friends-button">ğŸ‘¥ Amis</button>
Â  Â  </nav>
Â  Â  <button id="logout-button" onclick="handleLogoutAndRedirect()">log out</button>
</header>

<h2 class="section-title">Ma BibliothÃ¨que</h2>
<div class="game-grid" id="gameGrid"></div>

<div id="sidebar">
Â  Â  <button class="close-sidebar" onclick="toggleSidebar()">âœ–</button>
Â  Â  <h2>Amis</h2>
Â  Â  <p>Coming soon...</p>
</div>

<div id="cookie-modal-overlay">
Â  Â  <div id="cookie-modal">
Â  Â  Â  Â  <button id="close-cookie-modal" title="Fermer">&times;</button>
Â  Â  Â  Â  <h3>ğŸª Ce site utilise des cookies...</h3>
Â  Â  Â  Â  <p>Afin d'amÃ©liorer votre expÃ©rience et sauvegarder vos prÃ©fÃ©rences de jeu, nous devons utiliser des cookies. </p>
Â  Â  Â  Â  
Â  Â  Â  Â  <div id="button-group">
Â  Â  Â  Â  Â  Â  <button id="refuse-cookies-button">REFUSER</button>
Â  Â  Â  Â  Â  Â  <button id="accept-cookies-button">ACCEPTER</button>
Â  Â  Â  Â  </div>
Â  Â  </div>
</div>

<script>
Â  Â  const API_URL="https://project-3-api-2bgb.onrender.com";
Â  Â  
Â  Â  const games=[
Â  Â  Â  Â  {id:1,title:"Skull Arena",genre:"Survie",link:"Folder_for_Games/jeu_1/game.html",color:"#CF4F5E", img:"Image/Image_Skull_Arena.png"},
Â  Â  Â  Â  {id:2,title:"MTPlayer Clicker",genre:"Clicker",link:"private_clicker.html",color:"#63D945", img:"Image/Image_MTPClicker.png"}, 
Â  Â  Â  Â  {id:3,title:"Astro Dodge",genre:"Infinite",link:"Folder_for_Games/jeu2/game.html",color:"#07a7b3", img:"Image/Image_Astro_Dodge.png"},
Â  Â  Â  Â  {id:4,title:"Coming Soon...",genre:"Not defined",link:"",color:"#969696"},
Â  Â  Â  Â  {id:5,title:"Coming Soon...",genre:"Not defined",link:"",color:"#969696"},
Â  Â  Â  Â  {id:6,title:"Coming Soon...",genre:"Not defined",link:"",color:"#969696"}
Â  Â  ];

Â  Â  const username=localStorage.getItem("username");
Â  Â  const welcomeTitle=document.getElementById("welcomeTitle");
Â  Â  if(username){welcomeTitle.textContent=`ğŸ® ${username}`;}

Â  Â  // --- LOGIQUE MASQUAGE/DÃ‰MASQUAGE HOTBAR ---
Â  Â  const mainHeader = document.getElementById('main-header');
Â  Â  const DETECTION_ZONE_HEIGHT = 50; 

Â  Â  setTimeout(() => {
Â  Â  Â  Â  mainHeader.classList.add('show');
Â  Â  }, 100); 

Â  Â  setTimeout(() => {
Â  Â  Â  Â  mainHeader.classList.remove('show');
Â  Â  }, 2500); 

Â  Â  document.addEventListener('mousemove', (e) => {
Â  Â  Â  Â  if (e.clientY <= DETECTION_ZONE_HEIGHT) {
Â  Â  Â  Â  Â  Â  mainHeader.classList.add('show');
Â  Â  Â  Â  } else if (e.clientY > mainHeader.offsetHeight) {
Â  Â  Â  Â  Â  Â  mainHeader.classList.remove('show');
Â  Â  Â  Â  }
Â  Â  });
Â  Â  // ------------------------------------------


Â  Â  let isLoggingOut=false;

Â  Â  async function handleLogoutAndRedirect(){
Â  Â  Â  Â  if(isLoggingOut)return;
Â  Â  Â  Â  isLoggingOut=true;
Â  Â  Â  Â  try{await fetch(`${API_URL}/logout`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:username})});}catch(e){console.error(e);}
Â  Â  Â  Â  localStorage.removeItem("username");
Â  Â  Â  Â  window.location.href='index.html';
Â  Â  }

Â  Â  function logoutSilently(){
Â  Â  Â  Â  if(!username||isLoggingOut)return;
Â  Â  Â  Â  const data=JSON.stringify({id:username});
Â  Â  Â  Â  if(navigator.sendBeacon){navigator.sendBeacon(`${API_URL}/logout`,new Blob([data],{type:'application/json'}));}
Â  Â  Â  Â  else{try{const xhr=new XMLHttpRequest();xhr.open("POST",`${API_URL}/logout`,false);xhr.setRequestHeader("Content-Type","application/json");xhr.send(data);}catch(e){console.error(e);}}
Â  Â  }
Â  Â  window.addEventListener('beforeunload',()=>logoutSilently());

Â  Â  const grid=document.getElementById("gameGrid");
Â  Â  const searchBar=document.getElementById("search_bar");

Â  Â  function displayGames(filteredGames){
Â  Â  Â  Â  grid.innerHTML="";
Â  Â  Â  Â  filteredGames.forEach(game=>{
Â  Â  Â  Â  Â  Â  const card=document.createElement("div");
Â  Â  Â  Â  Â  Â  card.className="card";
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (!game.link) {
Â  Â  Â  Â  Â  Â  Â  Â  card.classList.add('disabled');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  let imageStyle = `background-color: ${game.color};`; 
Â  Â  Â  Â  Â  Â  let iconHtml = '<div class="game-icon">ğŸ®</div>'; 

Â  Â  Â  Â  Â  Â  if (game.img) {
Â  Â  Â  Â  Â  Â  Â  Â  imageStyle = `background-image: url('${game.img}');`;
Â  Â  Â  Â  Â  Â  Â  Â  iconHtml = ''; 
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const link=game.link?game.link:"#";
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  card.innerHTML=`
Â  Â  Â  Â  Â  Â  <div class="card-image" style="${imageStyle}">
Â  Â  Â  Â  Â  Â  Â  Â  ${iconHtml}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card-info">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="card-title">${game.title}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="card-genre">${game.genre}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="card-button" ${game.link?"":"disabled"}>â–¶ LANCER</button> 
Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (game.link) {
Â  Â  Â  Â  Â  Â  Â  Â  card.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = link;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const cardButton = card.querySelector('.card-button');
Â  Â  Â  Â  Â  Â  if (game.link) {
Â  Â  Â  Â  Â  Â  Â  Â  cardButton.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.stopPropagation(); 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = link;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  Â  });
Â  Â  Â  Â  anime({targets:'.card',opacity:[0,1],translateY:[30,0],delay:anime.stagger(100),duration:600,easing:'easeOutQuad'});
Â  Â  }

Â  Â  displayGames(games);

Â  Â  searchBar.addEventListener("input",()=>{
Â  Â  Â  Â  const text=searchBar.value.toLowerCase();
Â  Â  Â  Â  displayGames(games.filter(g=>g.title.toLowerCase().startsWith(text)));
Â  Â  });

Â  Â  /* SIDEBAR */
Â  Â  const sidebar=document.getElementById("sidebar");
Â  Â  const friendsButton=document.getElementById("friends-button");
Â  Â  function toggleSidebar(){sidebar.classList.toggle('sidebar-open');}
Â  Â  friendsButton.addEventListener('click',toggleSidebar);


Â  Â  // ----------------------------------------------------
Â  Â  // --- GESTION DES COOKIES (AVEC LOCALSTORAGE) ---
Â  Â  // ----------------------------------------------------
Â  Â  const cookieOverlay = document.getElementById('cookie-modal-overlay');
Â  Â  const acceptButton = document.getElementById('accept-cookies-button');
Â  Â  const closeButton = document.getElementById('close-cookie-modal');
Â  Â  
Â  Â  const MOVEMENT_INTERVAL = 50; 
Â  Â  let teleportIntervalId = null;

Â  Â  // Fonction pour accepter et fermer
Â  Â  function acceptCookiesAndClose() {
Â  Â  Â  Â  // 1. Enregistre l'acceptation dans le localStorage
Â  Â  Â  Â  localStorage.setItem('cookies_accepted', 'true');
Â  Â  Â  Â  
Â  Â  Â  Â  // 2. ArrÃªte le jeu et nettoie
Â  Â  Â  Â  if (teleportIntervalId) {
Â  Â  Â  Â  Â  Â  clearInterval(teleportIntervalId);
Â  Â  Â  Â  Â  Â  teleportIntervalId = null;
Â  Â  Â  Â  }
Â  Â  Â  Â  acceptButton.classList.remove('teleporting', 'stopped'); 
Â  Â  Â  Â  
Â  Â  Â  Â  // 3. Animation de fermeture et suppression
Â  Â  Â  Â  anime({targets: cookieOverlay, opacity: [1, 0], duration: 400, easing: 'easeOutQuad', complete: () => {
Â  Â  Â  Â  Â  Â  cookieOverlay.remove();
Â  Â  Â  Â  }});
Â  Â  }

Â  Â  // Fonction de tÃ©lÃ©portation
Â  Â  function teleportButton() {
Â  Â  Â  Â  if (!acceptButton.classList.contains('teleporting')) {
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  // [Logique de calcul des coordonnÃ©es...]
Â  Â  Â  Â  const buttonWidth = acceptButton.offsetWidth;
Â  Â  Â  Â  const buttonHeight = acceptButton.offsetHeight;
Â  Â  Â  Â  const viewportWidth = window.innerWidth;
Â  Â  Â  Â  const viewportHeight = window.innerHeight;
Â  Â  Â  Â  const xMax = Math.max(0, viewportWidth - buttonWidth);
Â  Â  Â  Â  const yMax = Math.max(0, viewportHeight - buttonHeight);
Â  Â  Â  Â  const newX = Math.random() * xMax;
Â  Â  Â  Â  const newY = Math.random() * yMax;
Â  Â  Â  Â  acceptButton.style.left = `${newX}px`;
Â  Â  Â  Â  acceptButton.style.top = `${newY}px`;
Â  Â  Â  Â  acceptButton.style.transform = 'none';
Â  Â  }
Â  Â  
Â  Â  // DÃ©marre la tÃ©lÃ©portation rÃ©pÃ©tÃ©e
Â  Â  function startTeleportation() {
Â  Â  Â  Â  acceptButton.classList.remove('stopped'); 
Â  Â  Â  Â  acceptButton.classList.add('teleporting');
Â  Â  Â  Â  
Â  Â  Â  Â  if (!teleportIntervalId) {
Â  Â  Â  Â  Â  Â  Â teleportIntervalId = setInterval(teleportButton, MOVEMENT_INTERVAL);
Â  Â  Â  Â  Â  Â  Â teleportButton(); 
Â  Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  // ArrÃªte la tÃ©lÃ©portation
Â  Â  function stopTeleportation() {
Â  Â  Â  Â  if (teleportIntervalId) {
Â  Â  Â  Â  Â  Â  clearInterval(teleportIntervalId);
Â  Â  Â  Â  Â  Â  teleportIntervalId = null;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  acceptButton.classList.add('stopped');
Â  Â  Â  Â  acceptButton.classList.remove('teleporting');
Â  Â  }
Â  Â  
Â  Â  
Â  Â  // ----------------------------------------------------
Â  Â  // --- LOGIQUE DE VÃ‰RIFICATION ET D'AFFICHAGE (MODIFIÃ‰E)
Â  Â  // ----------------------------------------------------
Â  Â  const isCookiesAccepted = localStorage.getItem('cookies_accepted') === 'true';

Â  Â  if (!isCookiesAccepted) {
Â  Â  Â  Â  // 1. Si les cookies ne sont pas acceptÃ©s, on affiche la modale (la rend visible)
Â  Â  Â  Â  cookieOverlay.style.display = 'flex'; 
Â  Â  Â  Â  cookieOverlay.style.opacity = 0;
Â  Â  Â  Â  
Â  Â  Â  Â  // Animation d'entrÃ©e
Â  Â  Â  Â  anime({targets: cookieOverlay, opacity: [0, 1], duration: 400, easing: 'easeOutQuad'});
Â  Â  Â  Â  
Â  Â  Â  Â  // 2. On attache les Ã©vÃ©nements pour le "jeu" (mouvement)
Â  Â  Â  Â  acceptButton.addEventListener('mouseover', startTeleportation);
Â  Â  Â  Â  acceptButton.addEventListener('mouseleave', stopTeleportation); 
Â  Â  Â  Â  
Â  Â  Â  Â  // 3. On dÃ©sactive complÃ¨tement le clic sur le bouton "ACCEPTER" (le jeu doit continuer)
Â  Â  Â  Â  acceptButton.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  });
Â  Â  Â  Â  
Â  Â  Â  Â  // 4. La SEULE issue : le clic sur la croix invisible
Â  Â  Â  Â  closeButton.addEventListener('click', acceptCookiesAndClose);
Â  Â  Â  Â  
Â  Â  Â  Â  // Optionnel : Le bouton Refuser ne fait rien (car il est dÃ©sactivÃ© en CSS)
Â  Â  Â  Â  const refuseButton = document.getElementById('refuse-cookies-button');
Â  Â  Â  Â  refuseButton.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  });
Â  Â  
Â  Â  } else {
Â  Â  Â  Â  // Si c'est 'true', l'Ã©lÃ©ment est dÃ©jÃ  masquÃ© par le CSS par dÃ©faut, on peut le retirer du DOM
Â  Â  Â  Â  cookieOverlay.remove();
Â  Â  }

Â  Â  // ----------------------------------------------------
</script>

</body>
</html>